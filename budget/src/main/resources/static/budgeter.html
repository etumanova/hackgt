<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Summary</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:ital,wght@0,100..900;1,100..900&family=Familjen+Grotesk:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="budgeter.css">
</head>
<body>
    <!-- Top Nav -->
    <header>
    Prospera
    <img src="/logoicon.svg" alt="Logo Graphic" 
         style="height:30px; margin-left:3px;"/>
    </header>

    <div class="main-flex-layout">
        <!-- Side Nav -->
    <nav>
        <a><button onclick="window.location.href='/'">üè†<br>Dashboard</button></a>
        <button onclick="window.location.href='/budgeter'">üí∞<br>Budgets</button>
        <button>üí≥<br>Investing</button>
     </nav>

     <main>
        <h1 class="familjen-grotesk">Budget Summary</h1>
        </main>

    <form id="budgetForm">
        <label for="income">Monthly Income:</label>
        <input type="number" id="income" name="income" required>
        <button type="button" onclick="setIncome()">Set Income</button>
        <br><br>
        <label for="category">Expense Category:</label>
        <select id="category" name="category">
            <option value="food">Food</option>
            <option value="tuition">Tuition</option>
            <option value="rent">Rent</option>
            <option value="bills">Bills</option>
            <option value="other">Other</option>
        </select>
        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount" required>
        <button type="button" onclick="addExpense()">Add Expense</button>
    </form>
    <h2>Summary</h2>
    <pre id="summary"></pre>
    <script>
        const apiUrl = '/api/budget';

        async function setIncome() {
            const income = document.getElementById('income').value;
            await fetch(`${apiUrl}/income?income=${income}`, { method: 'POST' });
            updateSummary();
        }

        async function addExpense() {
            const category = document.getElementById('category').value;
            const amount = document.getElementById('amount').value;
            await fetch(`${apiUrl}/expense?category=${category}&amount=${amount}`, { method: 'POST' });
            updateSummary();
        }

        async function updateSummary() {
            const response = await fetch(`${apiUrl}/summary`);
            const summary = await response.json();
            document.getElementById('summary').textContent = JSON.stringify(summary, null, 2);
        }

        updateSummary();
    </script>
    </div>
</body>
</html>